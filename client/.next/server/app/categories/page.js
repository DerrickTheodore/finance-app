(()=>{var e={};e.id=379,e.ids=[379],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1444:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(6845),n=r(5130),o=r(7412),a=r.n(o),i=r(1955),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d={children:["",{children:["categories",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9647)),"/Users/derricktheodore/app-library/finance-app/client/src/app/categories/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,8361))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,3631)),"/Users/derricktheodore/app-library/finance-app/client/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,8720,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,8665,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,790,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,8361))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/derricktheodore/app-library/finance-app/client/src/app/categories/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/categories/page",pathname:"/categories",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1852:(e,t,r)=>{Promise.resolve().then(r.bind(r,4172))},1934:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(9513);r(8796);let n=({message:e,action:t,className:r})=>(0,s.jsxs)("div",{className:r,style:{textAlign:"center",color:"#888",padding:"2rem 1rem",fontSize:"1.1rem"},children:[(0,s.jsx)("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:"\uD83E\uDEB9"}),(0,s.jsx)("div",{children:e}),t&&(0,s.jsx)("div",{style:{marginTop:"1rem"},children:t})]})},2124:(e,t,r)=>{Promise.resolve().then(r.bind(r,9647))},2306:e=>{e.exports={page:"page_page__ZU32B",main:"page_main__GlU4n",ctas:"page_ctas__g5wGe",primary:"page_primary__V8M9Y",secondary:"page_secondary__lm_PT",footer:"page_footer__sHKi3",logo:"page_logo__7fc9l",skeleton:"page_skeleton___FdI7","skeleton-loading":"page_skeleton-loading__dMUvC",linkToAccounts:"page_linkToAccounts__YthRO"}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4172:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(9513),n=r(8796),o=r(2306),a=r.n(o);function i(){return(0,s.jsx)("div",{className:a().page,children:(0,s.jsxs)("main",{className:a().main,children:[(0,s.jsx)("h1",{children:"Categories"}),(0,s.jsx)("div",{className:a().skeleton,style:{height:"80px"}}),(0,s.jsx)("div",{className:a().skeleton,style:{height:"300px"}})]})})}var l=r(6788),d=r(9037);let c=({category:e,onSave:t,onCancel:r,isSaving:o})=>{let[a,i]=(0,n.useState)(e?.name||""),[l,c]=(0,n.useState)(e?.color||""),[p,u]=(0,n.useState)(e?.icon||""),m=(0,d.GK)(),x=(0,d.bZ)(),g=async r=>{r.preventDefault();let s={name:a,color:l||null,icon:p||null};e?.id?x.mutate({categoryId:e.id,categoryData:s},{onSuccess:e=>{t(e)}}):m.mutate(s,{onSuccess:e=>{t(e)}})},h=m.error||x.error;return(0,s.jsxs)("form",{onSubmit:g,className:"space-y-4 p-4 border rounded-lg shadow-md bg-white",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold",children:[e?.id?"Edit":"Create"," Category"]}),h&&(0,s.jsx)("p",{className:"text-red-500 bg-red-100 p-2 rounded",children:h.message}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name*"}),(0,s.jsx)("input",{id:"name",type:"text",value:a,onChange:e=>i(e.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-700",children:"Color (hex, e.g., #RRGGBB)"}),(0,s.jsx)("input",{id:"color",type:"text",value:l||"",onChange:e=>c(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"icon",className:"block text-sm font-medium text-gray-700",children:"Icon (e.g., emoji or icon name)"}),(0,s.jsx)("input",{id:"icon",type:"text",value:p||"",onChange:e=>u(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)("button",{type:"button",onClick:r,disabled:o,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:o?"Saving...":"Save Category"})]})]})},p=({category:e,onEdit:t,onDelete:r,isDeleting:n})=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-0",children:e.name}),(0,s.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.color?(0,s.jsx)("span",{style:{backgroundColor:e.color,padding:"2px 8px",borderRadius:"4px",color:"#fff"},children:e.color}):"N/A"}),(0,s.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.icon||"N/A"}),(0,s.jsxs)("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-0",children:[(0,s.jsx)("button",{onClick:()=>t(e),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>r(e.id),disabled:n,className:"text-red-600 hover:text-red-900",children:n?"Deleting...":"Delete"})]})]},e.id);var u=r(1934);let m=()=>{let[e,t]=(0,n.useState)(!1),[r,o]=(0,n.useState)(null),{user:a}=(0,l.A)(),i=a?(0,d.Ck)():{data:[],isLoading:!1,error:null},m=i.data||[],x=i.isLoading,g=i.error,h=(0,d.xZ)(),f=(0,d.GK)(),y=(0,d.bZ)(),b=e=>{o(e),t(!0)},j=async e=>{window.confirm("Are you sure you want to delete this category?")&&h.mutate(e)};return a?x?(0,s.jsx)("p",{className:"text-center py-4",children:"Loading categories..."}):g&&!e?(0,s.jsxs)("p",{className:"text-red-500 bg-red-100 p-3 rounded text-center",children:["Error: ",g.message]}):(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Manage Categories"}),e?(0,s.jsx)(c,{category:r,onSave:()=>{t(!1),o(null)},onCancel:()=>{t(!1),o(null)},isSaving:f.isPending||y.isPending}):(0,s.jsx)("button",{onClick:()=>{t(!0),o(null)},className:"mb-4 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Add New Category"}),h.error&&(0,s.jsxs)("p",{className:"text-red-500 bg-red-100 p-3 rounded text-center my-2",children:["Error deleting category: ",h.error.message]}),!e&&0===m.length&&!x&&(0,s.jsx)(u.A,{message:"No categories found. Add one to get started!",className:"text-gray-600"}),!e&&m.length>0&&(0,s.jsx)("div",{className:"mt-6 flow-root",children:(0,s.jsx)("div",{className:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,s.jsx)("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0",children:"Name"}),(0,s.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Color"}),(0,s.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Icon"}),(0,s.jsx)("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-0",children:(0,s.jsx)("span",{className:"sr-only",children:"Edit"})})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:m.map(e=>(0,s.jsx)(p,{category:e,onEdit:b,onDelete:j,isDeleting:h.isPending},e.id))})]})})})})]}):null};function x(){let[e,t]=(0,n.useState)(!0);return(0,s.jsx)("div",{className:a().page,children:(0,s.jsxs)("main",{className:a().main,children:[(0,s.jsx)("h1",{children:"Categories"}),(0,s.jsx)("section",{className:a().section,children:(0,s.jsxs)("button",{onClick:()=>t(!e),className:a().button,style:{marginRight:"10px"},children:[e?"Hide":"Show"," Categories Manager"]})}),e&&(0,s.jsx)("section",{className:a().section,children:(0,s.jsx)(m,{})})]})})}function g(){return(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)(i,{}),children:(0,s.jsx)(x,{})})}},7302:(e,t,r)=>{"use strict";r.d(t,{U:()=>a});var s=r(6416),n=r(4951),o=r(8751);function a(e,t){return(0,n.t)({...e,enabled:!0,suspense:!0,throwOnError:o.R3,placeholderData:void 0},s.$,t)}},8361:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(8256);let n=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},9037:(e,t,r)=>{"use strict";r.d(t,{Ck:()=>p,GK:()=>u,bZ:()=>m,xZ:()=>x});var s=r(2020),n=r(7302),o=r(5373),a=r(5792);async function i(){let e=`${(0,s.h)()}/api/categories`,t=await fetch(e);if(!t.ok)throw Error(await t.text()||"Network response was not ok");return t.json()}async function l(e){let t=`${(0,s.h)()}/api/categories`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw Error(await r.text()||"Network response was not ok");return r.json()}async function d({categoryId:e,categoryData:t}){let r=`${(0,s.h)()}/api/categories/${e}`,n=await fetch(r,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw Error(await n.text()||"Network response was not ok");return n.json()}async function c(e){let t=`${(0,s.h)()}/api/categories/${e}`,r=await fetch(t,{method:"DELETE"});if(!r.ok)throw Error(await r.text()||"Network response was not ok");return r.json()}function p(){return(0,n.U)({queryKey:["categories"],queryFn:i})}function u(){let e=(0,o.jE)();return(0,a.n)({mutationFn:l,onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]})}})}function m(){let e=(0,o.jE)();return(0,a.n)({mutationFn:d,onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]})}})}function x(){let e=(0,o.jE)();return(0,a.n)({mutationFn:c,onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]})}})}},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9647:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(7629).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/derricktheodore/app-library/finance-app/client/src/app/categories/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/derricktheodore/app-library/finance-app/client/src/app/categories/page.tsx","default")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[345,804,256,113],()=>r(1444));module.exports=s})();